<!DOCTYPE /html>
<html>
    <head>
        <title>Polyrhythm</title>
    </head>
    <body>
        <canvas id = "myCanvas" style="background-color: black;"></canvas>
        <script src="sound.js"></script>
        <script src="track.js"></script>
        <script src="ball.js"></script>
        <script>
            const size = 700;
            myCanvas.width = size;
            myCanvas.height = size;

            const trackCenter = {x: size / 2, y: size / 2}
            const trackMinRadius = 100;
            const trackStep = 15;
            const ballRadius = 10;
            const ballSpeed = 0.01;

            const tracks = [];
            const balls = [];
            const N = 20;

            for (let i = 0; i < N; i++) {
                const trackRadius = trackMinRadius + 1 * trackStep;
                const track = new Track(trackCenter, trackRadius);
                const ball = new Ball(track, ballRadius, ballSpeed);
                tracks.push(track);
                balls.push(ball);
            }

            const ctx = myCanvas.getContext("2d");

            animate();

            function animate() {
                ctx.clearRect(0, 0, size, size);
                tracks.forEach((track) => track.draw(ctx));
                balls.forEach((ball) => ball.move());
                balls.forEach((ball) => ball.draw(ctx));
                requestAnimationFrame(animate);
            }
            track.draw(ctx);
            ball.draw(ctx);
        </script>
    </body>
</html>